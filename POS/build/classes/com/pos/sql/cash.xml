<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="Cash">
	<!-- <insert id="calculateCashInsert">
		INSERT INTO VAULT_CASH_TBL(
			TER_SER_NO
			,DEP_PAY_DT
			,DEP_PAY_TM
			,DEP_PAY_TY
			,CONTENTS
			,AMT
			)
		VALUES(
			'1'
			,TO_CHAR(SYSDATE,'YYYYMMDD')
			,TO_CHAR(SYSDATE,'HH24miSS')
			'1'
			'상품판매'
			,#{AMT}
			)
	</insert> -->
	
	<insert id="vaultCashInOut">
		INSERT INTO VAULT_CASH_TBL(
			TER_SER_NO
			,DEP_PAY_DT
			,DEP_PAY_TM
			,DEP_PAY_TY
			,CONTENTS
			,AMT
			)
		VALUES(
			#{TER_SER_NO}
			,TO_CHAR(SYSDATE,'YYYYMMDD')
			,TO_CHAR(SYSDATE,'HH24miSS')
			,#{DEP_PAY_TY}
			,#{CONTENTS}
			,#{AMT}
			)
	</insert>
	
	<select id="getAmtInit" resultType="int">
		SELECT 
		    TO_CHAR(SUM(CASE
		            WHEN DEP_PAY_TY = '1' THEN TO_NUMBER(AMT) ELSE TO_NUMBER(-AMT) 
		        END)) AS AMT
		FROM 
		    VAULT_CASH_TBL
		
		<!-- SELECT
		    SUM(
		        CASE
		            WHEN DEP_PAY_TY = '1' THEN TO_NUMBER(AMT)
		            WHEN DEP_PAY_TY = '2' THEN -TO_NUMBER(AMT)
		            ELSE 0
		        END
		    ) AS AMT
		FROM
		    VAULT_CASH_TBL
		 WHERE
		    TER_SER_NO = '1' -->
	</select>
	
	<insert id="salProdCancelValutCashOut" parameterType="com.pos.Vo.CashVo">
		INSERT INTO VAULT_CASH_TBL(
		    TER_SER_NO
		    ,DEP_PAY_DT
		    ,DEP_PAY_TM
		    ,DEP_PAY_TY
		    ,CONTENTS
		    ,AMT
		    )
		VALUES(
		    '1'
		    ,TO_CHAR(SYSDATE,'YYYYMMDD')
		    ,TO_CHAR(SYSDATE,'HH24MISS')
		    ,'2'
		    ,#{CONTENTS}
		    ,#{AMT}
		    )
	</insert>
</mapper>